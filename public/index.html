<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stellar Proxy</title>
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="/uv/uv.bundle.js"></script>
    <script src="/uv/uv.config.js"></script>

    <script>
        // High-speed config injected directly for priority
        window.__uv$config = {
            prefix: '/uv/service/',
            bare: 'https://bare.benroxy.me/', 
            encodeUrl: Ultraviolet.codec.xor.encode,
            decodeUrl: Ultraviolet.codec.xor.decode,
            handler: '/uv/uv.handler.js',
            client: '/uv/uv.client.js',
            bundle: '/uv/uv.bundle.js',
            config: '/uv/uv.config.js',
            sw: '/uv/uv.sw.js',
        };

        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker.register("/uv/sw.js", {
                    scope: __uv$config.prefix,
                });
            });
        }
    </script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
        body {
            background: radial-gradient(circle at top right, #1e1b4b, #0f172a);
            height: 100vh; overflow: hidden; color: white;
            display: flex; justify-content: center; align-items: center;
        }

        #ui-container {
            width: 100%; display: flex; justify-content: center;
            transition: all 0.4s ease;
        }

        #ui-container.hidden { opacity: 0; visibility: hidden; transform: scale(0.95); pointer-events: none; }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 32px;
            padding: 4rem; text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); width: 90%; max-width: 600px;
        }

        h1 { font-size: 3.5rem; margin-bottom: 0.5rem; background: linear-gradient(to right, #a78bfa, #38bdf8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        p { color: #94a3b8; margin-bottom: 2rem; }

        .search-bar {
            display: flex; background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 100px; padding: 8px;
            transition: 0.3s;
        }

        .search-bar:focus-within { border-color: #38bdf8; box-shadow: 0 0 20px rgba(56, 189, 248, 0.2); }

        input { flex: 1; background: transparent; border: none; color: white; padding: 15px 25px; font-size: 1.1rem; outline: none; }

        #searchBtn {
            background: #38bdf8; color: #000; border: none;
            width: 55px; height: 55px; border-radius: 50%;
            cursor: pointer; font-size: 1.5rem; display: grid; place-items: center;
            transition: 0.3s;
        }

        #searchBtn:hover { transform: scale(1.1); }

        #browser-view {
            position: fixed; inset: 0; background: #000;
            display: flex; flex-direction: column;
            visibility: hidden; opacity: 0; transition: 0.4s;
        }

        #browser-view.active { visibility: visible; opacity: 1; }

        .nav-bar { background: #0f172a; padding: 10px 20px; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #1e293b; }
        .nav-btn { background: rgba(255,255,255,0.05); border: none; color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; }

        iframe { flex: 1; border: none; background: white; }
    </style>
</head>
<body>

    <div id="ui-container">
        <div class="glass-panel">
            <h1>Stellar</h1>
            <p>Surf the web freely and securely.</p>
            <div class="search-bar">
                <input type="text" id="urlInput" placeholder="Search Google or type a URL..." autocomplete="off">
                <button id="searchBtn" onclick="launch()"><i class="ph ph-arrow-right"></i></button>
            </div>
        </div>
    </div>

    <div id="browser-view">
        <div class="nav-bar">
            <button class="nav-btn" onclick="goHome()"><i class="ph ph-house"></i> Home</button>
            <button class="nav-btn" onclick="reload()"><i class="ph ph-arrows-clockwise"></i></button>
        </div>
        <iframe id="iframeWindow"></iframe>
    </div>

    <script>
        const input = document.getElementById('urlInput');
        const browser = document.getElementById('browser-view');
        const ui = document.getElementById('ui-container');
        const frame = document.getElementById('iframeWindow');

        function launch() {
            let val = input.value.trim();
            if (!val) return;

            // Simple Logic: If it has a dot and no spaces, it's a URL. Otherwise, it's a search.
            if (!val.includes('.') || val.includes(' ')) {
                val = 'https://www.google.com/search?q=' + encodeURIComponent(val);
            } else {
                if (!val.startsWith('http')) val = 'https://' + val;
            }

            try {
                frame.src = __uv$config.prefix + __uv$config.encodeUrl(val);
                ui.classList.add('hidden');
                browser.classList.add('active');
            } catch (e) {
                alert("The proxy hasn't loaded yet. Try again in 2 seconds.");
            }
        }

        input.onkeydown = (e) => { if(e.key === 'Enter') launch(); };

        function goHome() {
            frame.src = "";
            browser.classList.remove('active');
            ui.classList.remove('hidden');
        }

        function reload() { frame.contentWindow.location.reload(); }
    </script>
</body>
</html>
